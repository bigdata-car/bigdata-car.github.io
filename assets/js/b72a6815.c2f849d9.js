"use strict";(globalThis.webpackChunkfirst_trial=globalThis.webpackChunkfirst_trial||[]).push([[4861],{2327(n,e,s){s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>o});var l=s(4848),r=s(8453);const i={},c="(GPUaaS) A100 GPU \ubcd1\ub82c \uc0ac\uc6a9\ud558\uae30-MIG \uae30\ubc18",d={permalink:"/faq/FAQ-2",source:"@site/faq/FAQ-2.md",title:"(GPUaaS) A100 GPU \ubcd1\ub82c \uc0ac\uc6a9\ud558\uae30-MIG \uae30\ubc18",description:"- (\uae30\uc874) \ud55c \ud504\ub85c\uc138\uc2a4\uac00 cuda:LOCAL_RANK(0, 1, 2, ...) \uac19\uc740 \ub85c\uceec GPU \uc778\ud14d\uc2a4 \uc9c1\uc811 \uc0ac\uc6a9",date:"2026-01-20T09:13:55.000Z",tags:[],readingTime:1.615,hasTruncateMarker:!1,authors:[],frontMatter:{},unlisted:!1,prevItem:{title:"(\ud074\ub77c\uc6b0\ub4dc) dpkg frontend lock \uc5d0\ub7ec \ubc1c\uc0dd\uc2dc \ud574\uacb0\ubc95",permalink:"/faq/FAQ-1"}},t={authorsImageUrls:[]},o=[{value:"<strong>1. CUDA_VISIBLE_DEVICES \uc124\uc815</strong>",id:"1-cuda_visible_devices-\uc124\uc815",level:3},{value:"<strong>2. set_device/device \uc9c0\uc815</strong>",id:"2-set_devicedevice-\uc9c0\uc815",level:3},{value:"<strong>3. \uc2e4\ud589</strong>",id:"3-\uc2e4\ud589",level:3}];function a(n){const e={code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["(\uae30\uc874) \ud55c \ud504\ub85c\uc138\uc2a4\uac00 cuda",":LOCAL_RANK","(0, 1, 2, ...) \uac19\uc740 \ub85c\uceec GPU \uc778\ud14d\uc2a4 \uc9c1\uc811 \uc0ac\uc6a9"]}),"\n",(0,l.jsxs)(e.li,{children:["(MIG \uae30\ubc18) \uac01 \ud504\ub85c\uc138\uc2a4\uac00 \uc790\uae30 MIG 1\uac1c\ub9cc \ubcf4\ub3c4\ub85d \ub9cc\ub4e0 \ub4a4, \ud504\ub85c\uc138\uc2a4 \ub0b4\ubd80\uc5d0\uc11c\ub294 \ud56d\uc0c1 cuda:0 \ub9cc \uc0ac\uc6a9 ",(0,l.jsx)("br",{}),"\n(CUDA_VISIBLE_DEVICES=\ud574\ub2f9 MIG UUID)"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"1-cuda_visible_devices-\uc124\uc815",children:(0,l.jsx)(e.strong,{children:"1. CUDA_VISIBLE_DEVICES \uc124\uc815"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\uae30\uc874 DDP (\ubb3c\ub9ac GPU)"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uc2a4\ud06c\ub9bd\ud2b8 \ubc16 (shell) \uc5d0\uc11c \uc124\uc815 \ub610\ub294 \ubbf8\uc124\uc815 (\uc790\ub3d9 \ud560\ub2f9)"}),"\n",(0,l.jsx)(e.li,{children:"\ucf54\ub4dc \ub0b4\uc5d0\uc11c LOCAL_RANK \ub85c \ub514\ubc14\uc774\uc2a4 \uc9c0\uc815"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"MIG \uae30\ubc18"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"import torch"})," \uc804 \uac15\uc81c \ub9e4\ud551","\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"LOCAL_RANK \uc77d\uae30"}),"\n",(0,l.jsx)(e.li,{children:"CUDA_VISIBLE_DEVICES \ub97c \ud574\ub2f9 \ud504\ub85c\uc138\uc2a4\uc758 MIG UUID 1\uac1c\ub85c \uc124\uc815"}),"\n",(0,l.jsx)(e.li,{children:"NCCL \uad00\ub828 env \uc124\uc815"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'import os\n\n# nvidia-smi -L \uba85\ub839\uc5b4\ub85c \ud655\uc778\ud55c MIG UUID\nMIG_IDS = [\n    "MIG-XXXXXX...",\n    "MIG-VVVVVV..."\n]\n\n# 1. LOCAL_RANK \uc77d\uae30\nlocal_rank = int(os.environment.get("LOCAL_RANK", "0"))\n# 2. CUDA_VISIBLE_DEVICES \ub97c \ud574\ub2f9 \ud504\ub85c\uc138\uc2a4\uc758 MIG UUID 1\uac1c\ub85c \uc124\uc815\nos.environment["CUDA_VISIBLE_DEVICES"] = MIG_IDS[local_rank]\n# 3. NCCL \uad00\ub828 env \uc124\uc815\nos.environment.setdefault("NCCL_P2P_DISABLE", "1")\nos.environment.setdefault("NCCL_IB_DISABLE", "1")\n'})}),"\n",(0,l.jsx)(e.h3,{id:"2-set_devicedevice-\uc9c0\uc815",children:(0,l.jsx)(e.strong,{children:"2. set_device/device \uc9c0\uc815"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uae30\uc874 DDP"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'local_rank = int(os.environ["LOCAL_RANK"])\ntorch.cuda.set_device(local_rank)\ndevice = torch.device(f"cuda:{local_rank}")\nddp_model = DDP(model, device_ids=[local_rank])\n'})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MIG \uae30\ubc18"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'# \ud504\ub85c\uc138\uc2a4 \ub2f9 MIG 1\uac1c\uc529 \uc0ac\uc6a9\ud558\ub3c4\ub85d \uac15\uc81c \ub9e4\ud551\ntorch.cuda.set_device(0)\ndevice = torch.device("cuda:0")\nddp_model = DDP(model, device_ids=[0])\n'})}),"\n",(0,l.jsx)(e.h3,{id:"3-\uc2e4\ud589",children:(0,l.jsx)(e.strong,{children:"3. \uc2e4\ud589"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uae30\uc874 DDP"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"torchrun --standalone --nproc_per_node=${num_devices} xxxx.py\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["MIG \uae30\ubc18","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uc2e4\ud589 \uc804 CUDA_VISIBLE_DEVICES \uc138\ud305 \ud574\uc81c (\ud558\ub098\uc758 \ud504\ub85c\uc138\uc2a4\uac00 \ud558\ub098\uc758 GPU \uc0ac\uc6a9\ud558\ub3c4\ub85d \uac15\uc81c)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"unset CUDA_VISIBLE_DEVICES\n\ntorchrun --standalone --nproc_per_node=${num_devices} xxxx.py\n"})})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}},8453(n,e,s){s.d(e,{R:()=>c,x:()=>d});var l=s(6540);const r={},i=l.createContext(r);function c(n){const e=l.useContext(i);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),l.createElement(i.Provider,{value:e},n.children)}}}]);